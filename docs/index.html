
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>FastAPI + Jekyll</title>
</head>
<body>
  <h1>Hello from the Jekyll frontend</h1>
  <button onclick="fetchData()">Fetch from FastAPI</button>
  <pre id="output"></pre>

<script>
  async function fetchData() {
    const res = await fetch("https://deliberator-app.onrender.com/hello");
    const data = await res.json();
    document.getElementById("output").textContent = JSON.stringify(data, null, 2);
  }
    
  function getSelectedTextInfo() {
    const selection = window.getSelection();
    if (!selection || selection.isCollapsed) {
      alert("Please highlight some text first.");
      return;
    }

    const selectedText = selection.toString();
    const range = selection.getRangeAt(0);
    const startOffset = range.startOffset;
    const endOffset = range.endOffset;

    const payload = {
      text: selectedText,
      start: startOffset,
      end: endOffset
    };

    console.log("Sending to backend:", payload);

    fetch("https://deliberator-app.onrender.com/highlight", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(payload)
    })
    .then(response => response.json())
    .then(data => {
      console.log("Response from backend:", data);
      alert("Highlight sent successfully!");
    })
    .catch(error => {
      console.error("Error:", error);
    });
  }
</script>

<!-- Add a button to trigger it -->
<button onclick="getSelectedTextInfo()">Send Highlight to Backend</button>
</body>
</html>
